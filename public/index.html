<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Receiver</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body { font-family:sans-serif; text-align:center; background:#111; color:#fff; padding:40px; overflow:hidden; }
h1{font-size:2em;}
#status{margin-top:30px;font-size:1.5em;}
.files-container{position:relative; width:100%; height:70vh;}
.fileAnim {
  position:absolute; top:-50px; left:50%; transform:translateX(-50%);
  padding:15px; border-radius:12px;
  background:linear-gradient(45deg,#ff0055,#00ffff);
  color:#000; font-weight:bold;
  animation: fly 1s ease forwards;
}
@keyframes fly {
  0%{transform:translate(-50%,-50px) scale(0);}
  50%{transform:translate(-50%,50vh) scale(1.2);}
  100%{transform:translate(-50%,50vh) scale(1);}
}
</style>
</head>
<body>

<h1>Receiver Online ðŸ”¥</h1>
<div id="status">Waiting for files...</div>
<div class="files-container" id="files"></div>

<script>
const socket = io();
const room = "room1";
socket.emit("join-room", room);

const filesDiv = document.getElementById("files");
const statusDiv = document.getElementById("status");

socket.on("files", files=>{
  statusDiv.textContent="Telekinesis activated! ðŸŒ€";
  files.forEach((f,i)=>{
    const div = document.createElement("div");
    div.className="fileAnim";
    div.style.left = `${20 + i*15}%`; // spread
    div.textContent=f;
    filesDiv.appendChild(div);

    // auto-download
    const a = document.createElement("a");
    a.href="/uploads/"+f;
    a.download="";
    document.body.appendChild(a);
    a.click();
    a.remove();
  });

  setTimeout(()=>{statusDiv.textContent="Waiting for files...";},2000);
});
</script>
</body>
</html>
