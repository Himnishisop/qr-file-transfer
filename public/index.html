<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Receiver Cart</title>
<script src="/socket.io/socket.io.js"></script>

<style>
body{
  margin:0;
  background:#050505;
  color:#fff;
  font-family:system-ui;
  overflow:hidden;
}

#cart{
  position:fixed;
  bottom:-300px;
  left:50%;
  transform:translateX(-50%);
  width:400px;
  background:linear-gradient(180deg,#00ffff,#ff00aa);
  border-radius:30px;
  padding:20px;
  text-align:center;
  transition:1s cubic-bezier(.2,1.8,.4,1);
}

#cart.show{bottom:40%}

#files{font-size:.9em;margin-top:10px}

button{
  margin-top:20px;
  padding:14px 26px;
  border:none;
  border-radius:14px;
  font-size:1em;
  cursor:pointer;
}
</style>
</head>

<body>

<h1 style="text-align:center;margin-top:20px">
ðŸ§  Receiver Online
</h1>

<div id="cart">
  <h2>ðŸ›’ Incoming Cart</h2>
  <div id="files"></div>
  <button id="download" style="display:none">Download Cart</button>
</div>

<script>
const socket = io();
socket.emit("join-room","room1");

const cart=document.getElementById("cart");
const filesDiv=document.getElementById("files");
const btn=document.getElementById("download");

let files=[];

socket.on("file-init",list=>{
  files=list;
  filesDiv.innerHTML="";
  list.forEach(f=>{
    const d=document.createElement("div");
    d.textContent="â€¢ "+f;
    filesDiv.appendChild(d);
  });
  cart.classList.add("show");

  setTimeout(()=>btn.style.display="inline-block",1200);
});

btn.onclick=()=>{
  files.forEach(f=>{
    const a=document.createElement("a");
    a.href="/uploads/"+f;
    a.download="";
    document.body.appendChild(a);
    a.click();
    a.remove();
  });
};
</script>

</body>
</html>
