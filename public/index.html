<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Receiver</title>
<script src="/socket.io/socket.io.js"></script>
<style>
  body { font-family:sans-serif; text-align:center; background:#111; color:#fff; padding:40px; }
  h1{font-size:2em;}
  #status{margin-top:30px;font-size:1.5em;}
  .fileAnim {
    display:inline-block;
    margin:10px;
    padding:15px;
    border-radius:12px;
    background:linear-gradient(45deg,#ff0055,#00ffff);
    color:#000;
    font-weight:bold;
    animation: pop 0.7s ease forwards;
  }
  @keyframes pop {
    0%{transform:scale(0);}
    100%{transform:scale(1);}
  }
</style>
</head>
<body>

<h1>Receiver Online ðŸ”¥</h1>
<div id="status">Waiting for files...</div>
<div id="files"></div>

<script>
const socket = io();
const room = "room1"; // same as sender
socket.emit("join-room", room);

const filesDiv = document.getElementById("files");
const statusDiv = document.getElementById("status");

socket.on("files", files=>{
  statusDiv.textContent="Receiving files...";
  files.forEach(f=>{
    // animation box
    const div = document.createElement("div");
    div.className="fileAnim";
    div.textContent=f;
    filesDiv.appendChild(div);

    // auto download
    const a = document.createElement("a");
    a.href="/uploads/"+f;
    a.download="";
    document.body.appendChild(a);
    a.click();
    a.remove();
  });
  setTimeout(()=>{statusDiv.textContent="Waiting for files...";},1000);
});
</script>

</body>
</html>
